version: 2

models:
  - name: dim_customers
    description: >
      Customer dimension table containing one record per customer,
       for customer-level analysis, segmentation, lifetime value,
      and cohort modeling.
    columns:
      - name: customer_id
        description: "Unique identifier for the customer."
      - name: first_name
        description: "Customer’s first name."
      - name: last_name
        description: "Customer’s last name."
      - name: full_name
        description: "Concatenated first and last name of the customer."
      - name: street
        description: "Street address of the customer."
      - name: city
        description: "City where the customer resides."
      - name: state
        description: "State or province of the customer."
      - name: zipcode
        description: "Postal or ZIP code of the customer."
      - name: first_order_date
        description: "Date of the customer’s first completed order. Used for cohort assignment."
      - name: total_order_value
        description: "Total monetary value of all completed orders placed by the customer."
      - name: total_num_orders
        description: "Total number of completed orders placed by the customer."
      - name: avg_order_value
        description: "Average value per completed order for the customer."
      - name: etl_load_timestamp
        description: "Timestamp indicating when the record was last loaded by the ETL process."

  - name: top_products
    description: >
      Aggregated product-level model showing products ranked by total revenue.
    columns:
      - name: product_id
        description: "Unique identifier for the product."
      - name: product_name
        description: "Name of the product."
      - name: category_id
        description: "Unique identifier for the product category."
      - name: category_name
        description: "Name of the product category."
      - name: department_id
        description: "Unique identifier for the department the product belongs to."
      - name: department_name
        description: "Name of the department."
      - name: total_revenue
        description: "Total revenue generated by the product from completed orders."
      - name: total_units_sold
        description: "Total number of product sold from completed orders."
      - name: etl_load_timestamp
        description: "Timestamp indicating when the record was last loaded by the ETL process."

  - name: sales_metrics
    description: >
      Daily aggregated sales metrics used for trend analysis,
      operational monitoring, and executive dashboards.
    columns:
      - name: order_date
        description: "Calendar date of the orders."
      - name: daily_revenue
        description: "Total revenue generated from completed orders on the given date."
      - name: daily_total_orders
        description: "Total number of orders placed on the given date."
      - name: daily_units_sold
        description: "Total number of units sold on the given date."
      - name: daily_avg_order_value
        description: "Average order value for the given date."
      - name: rolling_7_days
        description: "7-day rolling average of daily revenue."
      - name: rolling_30_days
        description: "30-day rolling average of daily revenue."
      - name: etl_load_timestamp
        description: "Timestamp indicating when the record was last loaded by the ETL process."

  - name: customer_order_count
    description: >
      Customer-level order count metrics broken down by order status.
      Used for customer behavior analysis and operational reporting.
    columns:
      - name: customer_id
        description: "Unique identifier for the customer."
      - name: num_orders
        description: "Total number of orders placed by the customer."
      - name: num_completed_orders
        description: "Number of completed orders placed by the customer."
      - name: num_pending_orders
        description: "Number of pending orders placed by the customer."
      - name: num_closed_orders
        description: "Number of closed or canceled orders placed by the customer."
      - name: num_suspected_fraud_orders
        description: "Number of orders flagged as suspected fraud for the customer."
      - name: etl_load_timestamp
        description: "Timestamp indicating when the record was last loaded by the ETL process."

  - name: customer_cohorts
    description: >
      Customer cohort fact table used to analyze retention behavior over time.
      Each row represents the number of active customers from a cohort
      in a given month since their first purchase.
    columns:
      - name: cohort_month
        description: "Month of the customer’s first completed order. Defines the cohort."
      - name: activity_month
        description: "Month in which customer activity occurred."
      - name: month_number
        description: "Number of months since the cohort month (month 0 = first purchase)."
      - name: active_customers
        description: "Number of distinct customers active in the given cohort and month."
      - name: retention_rate
        description: "Percentage of the original cohort that remained active in the given month."
      - name: etl_load_timestamp
        description: "Timestamp indicating when the record was last loaded by the ETL process."